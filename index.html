<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/additional.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Raop.js by javarouka</title>
</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1>Raop.js</h1>
            <h2>RAOP는 오브젝트 기반의 AOP 를 제공하는 간단한 자바스크립트 라이브러리입니다.</h2>
        </header>

        <section id="downloads" class="clearfix">
            <a href="https://github.com/javarouka/raop.js/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
            <a href="https://github.com/javarouka/raop.js/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
            <a href="https://github.com/javarouka/raop.js" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
            <h1>
                <a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>
                설치
            </h1>
            <ul>
                <li>
                    <h2>nodejs</h2>
                    <code>
                        $ npm install raop
                    </code>
                </li>
                <li>
                    <h2>browser</h2>
                    <code>
                        &lt;script type="text/javascript" src="/path/to/raop.min.js"&gt;&lt;/script&gt;
                    </code>
                </li>
            </ul>

            <h1>
                <a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>
                사용법
            </h1>
            <h2>Basic</h2>
            <h3>raop.weave 메서드</h3>
            <p>
                객체(Object)와 관심(Aspect)을 특정 대상과 시점에 묶는 메서드입니다. 인자를 4개 받습니다.<br/>
                <code>raop.weave({aopTarget}, {pointcut}, {adviceType}, {advice})</code>
            </p>
            <ul>
                <li>
                    <h4>aopTarget</h4>
                    <p>aop를 적용할 객체입니다.</p>
                </li>
                <li>
                    <h4>pointcut</h4>
                    <p>
                        aopTarget 에 적용될 메서드를 구별해내는 인자입니다.<br/>
                        <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank">정규표현식</a>이나 함수가 될 수 있습니다.
                        함수를 사용한다면 인자를 받는데, 다음과 같습니다. 포인트컷 함수는 반드시 boolean 값을 반환해야 합니다.<br/>
                        <code>fnPointcut([Method Name])</code>
                    </p>
                    <dl class="arguments-desc">
                        <dt>Method Name</dt>
                        <dd>객체의 메서드 이름입니다. 이것으로 AOP 적용 여부를 판단하는 함수 몸체를 만들면 됩니다.</dd>
                    </dl>
                </li>
                <li>
                    <h4>adviceType</h4>
                    <p>어드바이스 타이밍입니다. 4종류가 있습니다(raop.Aspect.(BEFORE|AFTER|EXCEPTION|AROUND))</p>
                    <dl class="arguments-desc">
                        <dt>raop.Aspect.BEFORE</dt>
                        <dd>객체의 메소드가 실행되기 전 어드바이스가 실행됩니다.</dd>
                        <dt>raop.Aspect.AFTER</dt>
                        <dd>객체의 메소드가 실행된 뒤 어드바이스가 실행됩니다.</dd>
                        <dt>raop.Aspect.EXCEPTION</dt>
                        <dd>객체의 메소드가 무언가를 throw 하게 되면 실행됩니다.
                            당신은 어드바이스 함수에 전달되는 인자객체의 "exception" 속성을 사용하여 던져진 객체에 접근할 수 있습니다.</dd>
                        <dt>raop.Aspect.AROUND</dt>
                        <dd>객체의 메소드가 실행되지 않고 어드바이스가 실행됩니다.
                            대신 객체의 메소드는 어드바이스 함수의 첫번째 인자로 전달됩니다. 일반적인 인자 객체는 두번째 인자로 전달됩니다.</dd>
                    </dl>
                </li>
                <li>
                    <h4>advice</h4>
                    <p>
                        어드바이스 함수입니다.<br/>
                        어드바이스 함수는 일반적으로 인자 객체를 인자로 전달 받습니다.
                        다만 어드바이스 타이밍이 AROUND 일 경우 첫번째 인자로 객체 메소드가 오므로 인자 객체는 두번째 인자가 됩니다.<br/>
                        인자 객체의 속성은 다음과 같습니다.
                    </p>
                    <dl class="arguments-desc">
                        <dt>args</dt>
                        <dd>객체 메서드에 전달되는 Argument 객체입니다. 이 값을 조작하면 실제 객체 메서드의 인자도 바뀝니다. Arguments 객체에 대해서는
                            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope/arguments" target="_blank">MDN 문서</a>를 참고하세요</dd>
                        <dt>target</dt>
                        <dd>AOP가 적용되는 객체입니다. 어드바이스는 이 객체를 컨텍스트(this)로 하여 실행됩니다.</dd>
                        <dt>todo</dt>
                        <dd>실제 수행될 메서드입니다</dd>
                        <dt>advice</dt>
                        <dd>weave 시 인자로 준 어드바이스 함수입니다.</dd>
                        <dt>type</dt>
                        <dd>weave 시 인자로 준 어드바이스 타이밍입니다.</dd>
                        <dt>method</dt>
                        <dd>pointcut에 의해 join 된 메서드의 이름입니다.</dd>
                        <dt>exception</dt>
                        <dd>
                            어드바이스 타입이 EXCEPTION이고 객체 메서드가 객체를 throw할 경우 객체 메서드에서 던져진 객체를 가지고 있습니다.
                        </dd>
                    </dl>
                </li>
            </ul>
            <h2>Example Codes</h2>
            <h4>객체의 메서드가 실행될 때 로그를 찍는 간단한 예제</h4>
            <pre style='color:#000000;background:#ffffff;'>
<span style='color:#800000; font-weight:bold; '>var</span> calculator <span style='color:#808030; '>=</span> <span style='color:#800080; '>{</span>
    plus<span style='color:#800080; '>:</span> <span style='color:#800000; font-weight:bold; '>function</span><span style='color:#808030; '>(</span>a<span style='color:#808030; '>,</span> b<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
        <span style='color:#800000; font-weight:bold; '>return</span> a <span style='color:#808030; '>+</span> b<span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span><span style='color:#808030; '>,</span>
    minus<span style='color:#800080; '>:</span> <span style='color:#800000; font-weight:bold; '>function</span><span style='color:#808030; '>(</span>a<span style='color:#808030; '>,</span> b<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
        <span style='color:#800000; font-weight:bold; '>return</span> a <span style='color:#808030; '>-</span> b<span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span><span style='color:#800080; '>;</span>

<span style='color:#800000; font-weight:bold; '>var</span> logAdvice <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>function</span><span style='color:#808030; '>(</span>options<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
    console<span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>log</span><span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>method </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> options<span style='color:#808030; '>.</span>method <span style='color:#808030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '> execute</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span><span style='color:#800080; '>;</span>

<span style='color:#696969; '>// plus method aop apply, type BEFORE</span>
calculator <span style='color:#808030; '>=</span> raop<span style='color:#808030; '>.</span>weave<span style='color:#808030; '>(</span>
    calculator<span style='color:#808030; '>,</span>
    <span style='color:#800000; font-weight:bold; '>function</span><span style='color:#808030; '>(</span>name<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
        <span style='color:#800000; font-weight:bold; '>return</span> name <span style='color:#808030; '>===</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>plus</span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span><span style='color:#808030; '>,</span>
    raop<span style='color:#808030; '>.</span>Aspect<span style='color:#808030; '>.</span>AdviceType<span style='color:#808030; '>.</span>BEFORE<span style='color:#808030; '>,</span>
    logAdvice
<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

<span style='color:#696969; '>// console.log("method plus execute")</span>
<span style='color:#800000; font-weight:bold; '>var</span> result <span style='color:#808030; '>=</span> calculator<span style='color:#808030; '>.</span>plus<span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span></pre>
            <h4>EXCEPTION 어드바이스 예제</h4>
            <pre style='color:#000000;background:#ffffff;'>
<span style='color:#800000; font-weight:bold; '>var</span> calculator <span style='color:#808030; '>=</span> <span style='color:#800080; '>{</span>
    plus<span style='color:#800080; '>:</span> <span style='color:#800000; font-weight:bold; '>function</span><span style='color:#808030; '>(</span>a<span style='color:#808030; '>,</span> b<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
        <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>typeof</span> a <span style='color:#808030; '>!==</span> <span style='color:#0000e6; '>'number'</span> <span style='color:#808030; '>||</span> <span style='color:#800000; font-weight:bold; '>typeof</span> b <span style='color:#808030; '>!==</span> <span style='color:#0000e6; '>'number'</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
            <span style='color:#800000; font-weight:bold; '>throw</span> <span style='color:#800000; font-weight:bold; '>new</span> Error<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>arguments must be number type</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        <span style='color:#800080; '>}</span>
        <span style='color:#800000; font-weight:bold; '>return</span> a <span style='color:#808030; '>+</span> b<span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span><span style='color:#808030; '>,</span>
    minus<span style='color:#800080; '>:</span> <span style='color:#800000; font-weight:bold; '>function</span><span style='color:#808030; '>(</span>a<span style='color:#808030; '>,</span> b<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
        <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>typeof</span> a <span style='color:#808030; '>!==</span> <span style='color:#0000e6; '>'number'</span> <span style='color:#808030; '>||</span> <span style='color:#800000; font-weight:bold; '>typeof</span> b <span style='color:#808030; '>!==</span> <span style='color:#0000e6; '>'number'</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
            <span style='color:#800000; font-weight:bold; '>throw</span> <span style='color:#800000; font-weight:bold; '>new</span> Error<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>arguments must be number type</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
        <span style='color:#800080; '>}</span>
        <span style='color:#800000; font-weight:bold; '>return</span> a <span style='color:#808030; '>-</span> b<span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span><span style='color:#800080; '>;</span>

<span style='color:#800000; font-weight:bold; '>var</span> throwHandler <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>function</span><span style='color:#808030; '>(</span>options<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
    <span style='color:#800000; font-weight:bold; '>var</span> exception <span style='color:#808030; '>=</span> options<span style='color:#808030; '>.</span>exception<span style='color:#800080; '>;</span>
    console<span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>log</span><span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>Error! </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> exception<span style='color:#808030; '>.</span>name <span style='color:#808030; '>+</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>. cause : </span><span style='color:#800000; '>"</span> <span style='color:#808030; '>+</span> exception<span style='color:#808030; '>.</span>message<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>exception<span style='color:#808030; '>.</span>stack<span style='color:#808030; '>)</span> console<span style='color:#808030; '>.</span><span style='color:#800000; font-weight:bold; '>log</span><span style='color:#808030; '>(</span>exception<span style='color:#808030; '>.</span>stack<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span><span style='color:#800080; '>;</span>

<span style='color:#696969; '>// aop apply, type EXCEPTION</span>
calculator <span style='color:#808030; '>=</span> raop<span style='color:#808030; '>.</span>weave<span style='color:#808030; '>(</span>
    calculator<span style='color:#808030; '>,</span>
    <span style='color:#808030; '>/</span><span style='color:#808030; '>^</span>plus<span style='color:#808030; '>/</span><span style='color:#808030; '>,</span>
    raop<span style='color:#808030; '>.</span>Aspect<span style='color:#808030; '>.</span>AdviceType<span style='color:#808030; '>.</span>EXCEPTION<span style='color:#808030; '>,</span>
    logAdvice
<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

<span style='color:#696969; '>// string arguments</span>
<span style='color:#800000; font-weight:bold; '>var</span> result <span style='color:#808030; '>=</span> calculator<span style='color:#808030; '>.</span>plus<span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>one</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>two</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#696969; '>/*</span>
<span style='color:#696969; '>Error: arguments must be number type</span>
<span style='color:#696969; '>&#xa0;&#xa0;&#xa0;&#xa0;at Object.calculator.plus ( ... )</span>
<span style='color:#696969; '>&#xa0;&#xa0;&#xa0;&#xa0;at ... some stacktrace ...</span>
<span style='color:#696969; '>*/</span></pre>

            <h1>
                <a name="contributer" class="anchor" href="#contributer"><span class="octicon octicon-link"></span></a>
                Contributer
            </h1>

            <ul>
                <li>
                    <a href="mailto:javarouka@gmail.com">javarouka@gmail.com</a>
                </li>
            </ul>

        </section>

        <footer>
            Raop.js is maintained by <a href="https://github.com/javarouka">javarouka</a><br>
            This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

    </div>
</div>
</body>
</html>