/* raop 2013-08-09 */
!function(a){"use strict";var b=[].slice,c=new Error("argument is invalid"),d=new Error("advice function is invalid. It should be function type");Object.freeze=Object.freeze||function(a){return a},Object.keys=Object.keys||function(a){var b=[];for(var c in a)i.call(a,c)&&b.push(c);return b},Object.create=Object.create||function(a){var b=function(){};return b.prototype=a,new b},Array.prototype.forEach=Array.prototype.forEach||function(a,b){var c,d;if(null==this)throw new TypeError("this is null or not defined");var e=Object(this),f=e.length>>>0;if("[object Function]"!=={}.toString.call(a))throw new TypeError(a+" is not a function");for(b&&(c=b),d=0;f>d;){var g;Object.prototype.hasOwnProperty.call(e,d)&&(g=e[d],a.call(c,g,d,e)),d++}};var e=a,f=Object.create(null),g=e.raop;"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=f),exports.raop=f):e.raop=f;for(var h=["Function","Number","String","Date","RegExp"],i=Object.prototype.hasOwnProperty,j=Object.prototype.toString,k=function(a){f["is"+a]=function(b){return j.call(b)==="[object "+a+"]"}},l=0,m=h.length;m>l;l++)k(h[l]);f.isArray=Array.isArray||function(a){return"[object Array]"===j.call(a)},f.isObject=function(a){return a===Object(a)},f.noConflict=function(){return e.raop=g,this},f.each=function(a,b){if(a.forEach)a.forEach(b);else if(f.isObject(a)){var c;for(c in a)i.call(a,c)&&b.call(a,a[c],c)}else b(a)},f.extend=function(a,b){return f.each(b,function(b,c){a[c]=b}),obj};var n=function(a){return b.call(a)},o={BEFORE:function(a){return a.advice.call(a.target,a),a.todo.apply(a.target,n(a.args))},AFTER:function(a){var b=a.todo.apply(a.target,n(a.args));return a.advice.call(a.target,a),b},AROUND:function(a){return a.advice.call(a.target,a)},EXCEPTION:function(a){try{return a.todo.apply(a.target,n(a.args))}catch(b){return a.exception=b,a.advice.call(a.target,a)}}},p=function(a){return a},q=function(){},r=function(a,b,c,d){return function(){return c({args:arguments,target:a,todo:b,advice:d,type:c})}},s=function(a,b,c,d){var e=Object.keys(a);f.isString(c)&&(c=o[c.toUpperCase()]),e.forEach(function(e){var g=a[e];f.isFunction(g)&&b.test(e)&&(a[e]=r(a,g,c,d))})};f.Aspect={Pointcut:p,Advise:q,weave:s,AdviceType:o},s(f.Aspect,/^weave$/,f.Aspect.AdviceType.BEFORE,function(a){if(!a.args)throw c;if(a.type||(a.type=o.AROUND),!f.isFunction(a.advice))throw d}),Object.freeze(f)}(this);